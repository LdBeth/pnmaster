 out←curva u;d;i;k;A;⎕IO
 ⎕IO←1
    ⍝ Curvature based image processig
 d←0⍴⍨8,⍴u
 k←0 3 3⍴0
 k⍪←3 3⍴0 0 0 0.5 ¯1 0.5 0 0 0
 k⍪←3 3⍴0 0.5 0 0 ¯1 0 0 0.5 0
 k⍪←3 3⍴0.5 0 0 0 ¯1 0 0 0 0.5
 k⍪←3 3⍴0 0 0.5 0 ¯1 0 0.5 0 0
 k⍪←3 3⍴¯1 1 0 1 ¯1 0 0 0 0
 k⍪←3 3⍴0 0 0 1 ¯1 0 ¯1 1 0
 k⍪←3 3⍴0 1 ¯1 0 ¯1 1 0 0 0
 k⍪←3 3⍴0 0 0 0 ¯1 1 0 1 ¯1
 :For i :In ⍳8
     A←k[i;;]
     d[i;;]←{+/,A×⍵}⌺3 3⊢u
 :EndFor
 out←u+⍉(⊃∘⍋∘|⊃⊢)⍤1⊢⍉d
